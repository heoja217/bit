package java63.web03.service;

import java.util.HashMap;
import java.util.List;
import java63.web03.dao.ProductDao;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

/* Service 컴포넌트의 역할 
 => 비즈니스 로직 수행
 => 트랜잭션 관리
*/
@Service
public class ProductService {
	@Autowired
	ProductDao productDao;
	
	public List<?> getList(int pageNo, int pageSize){
	  
    HashMap<String,Object> paramMap = new HashMap<>();
    paramMap.put("startIndex", ((pageNo - 1) * pageSize));
    paramMap.put("pageSize", pageSize);
    
    return productDao.selectList(paramMap);
	}
	
  public int getMaxPageNo(int pageSize) {
    int totalSize = productDao.totalSize();
    int maxPageNo = totalSize / pageSize;
    if ((totalSize % pageSize) > 0) maxPageNo++;
    
  	return maxPageNo;
  }
  
  public void add(Product product) {
    productDao.insert(product);
    productDao.insertPhoto(product);
  }
}
